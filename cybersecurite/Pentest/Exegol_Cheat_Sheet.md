---
icon: shield-lock
description: soon....
categories: [Cybersécurité]
date: 2023-12-12
tags: [exegol, docker, linux, pentest, ctf]
order: 100
---

# Exegol Cheat Sheet

=== :icon-report: Mises en garde

!!! Warning Cette documentation est en cours d'écriture :writing_hand:
Il pourrait il y a avoir quelques erreurs.  
Si vous en remarquez une, contactez-moi [ici](mailto:contactit.yarka@slmail.me) :slightly_smiling_face:
!!!

===

Exegol Cheat Sheet est un condensé des commandes et concepts pertinents à mon sens sur le projet exegol.  

---

## 1. Installation

- Exegol repose sous docker, si il n'est pas installé sur votre système, installez le avec cette commande :

```sh
curl -fsSL "https://get.docker.com/" -o get-docker.sh && sh get-docker.sh
```

---

### 1.1 Ajouter l'utilisateur au groupe docker

Autoriser l'usage de docker et donc exegol via l'utilisateur actuel sans élévations de privilèges :

```sh
sudo usermod -aG docker $(id -u -n) && newgrp docker
```

---

### 1.2 Installer exegol avec PIPX

- La manière la plus simple et propre d'installer le projet python exegol (en version stable main branch) :

> Requiert pipx, l'installer au besoin `sudo apt install pipx`

```sh
pipx install exegol
```

!!!primary
pipx va automatiquement créer les symlinks du venv python pour que l'appel du binaire se fasse sans problèmes.  
La <a href="[https://privatebin.net](https://peps.python.org/pep-0668/)" target="_blank">PEP668</a>introduit récemment par les distributions GNU/Linux majeures n'autorise pas l'installation de packages python côté système notamment avec **pip**.  
Pour une bonne raison, puisque beaucoup de projets python ont été développés sur une version spécifique de python avec des versions de dépendances spécifiques, généralement installés avec `pip install -r requirments.txt`.  

Ce qui peut causer d'importants problèmes de dépendances entre les projets c’est pourquoi il **FAUT** isoler les environnements python (idéalement) de chaque projet, sois par la création de venv ou par pipx qui rend l'opération rapide et simple pour l'utilisateur. Raison pour laquelle dans chaque projet python installé dans les images dockers proposées par exegol vous trouverez un venv associé.
!!!

---

### 1.3 Ajouter l'autocompletion

Ajouter dans le .bashrc ou .zshrc :

```sh ~/.bashrc
eval "$(register-python-argcomplete --no-defaults exegol)"
```

---

### 1.4 Installer une image docker

- Installer une image docker d'exegol :

```sh
exegol install full
```

---

## 2. Upgrade exegol

```sh
pipx upgrade exegol
```

---

## 3. Les ressource offline

Les ressources offline sont stockées dans `/opt/resources` qui est partagé entre le système hôte et les containers docker.
Dans ce répertoire, sont stockés par défaut des outils utiles pour le pentest comme :
- winpeas
- linpeas
- ...

L'objectif étant de gagner du temps et de faciliter le transfert vers une cible.

---

## 4. Usage

- Install an image : `exegol install`  
- Create/start/enter a container : `exegol start`  
- Show info on containers and images : `exegol info`  
- Stop a container : `exegol stop`  
- Remove a container : `exegol remove`  
- Uninstall an image : `exegol uninstall`  
- Get help and advanced usage : `exegol --help`  
- Help and examples can be obtained for each action directly from the wrapper with the following command: `exegol <action> -h` (action: install/start/stop/etc.).

---

## 5. Installer exegol en version beta

La version beta (dev branch) d'exegol propose plusieurs fonctionnalités comme la plus attendue le **remote desktop** (en web) sur un container.  
Si vous avez exegol installé, désinstallez la version standard :

```sh
pipx uninstall exegol
```

1️⃣ Il est nécessaire d'installer exegol depuis le repo github :

```sh
git clone "https://github.com/ThePorgs/Exegol"
```

2️⃣ Installer les dépendances python :

```sh
python3 -m pip install --user --requirement "Exegol/requirements.txt" --break-system-packages
```

> Ici l'option `--break-system-packages` ignore la PEP668.

3️⃣ Ajouter exegol au PATH :

!!!warning
Si vous avez désinstallé une précédente de version d'exegol auparavant, supprimez l'ancien fichier : `sudo rm -f /usr/local/bin/exegol`
!!!

```sh
sudo ln -s "$(pwd)/Exegol/exegol.py" "/usr/local/bin/exegol"
```

4️⃣ Mettre à jour vers la version beta ou dev branch :

```sh
exegol update -v
```

5️⃣ Il vous sera demandé de choisir la version de votre branche dans le repo git, choisissez **dev**.  

6️⃣ Vous devrez par la suite mettre à jour les dépendances python du projet ( la commande s'affichera dans votre terminal).

---

### Lancer un container avec remote desktop en accès web 

```sh
exegol start test nightly --desktop
```

![Source : Discord d'exegol @Shutdown](https://media.discordapp.net/attachments/1146186441454530701/1146186445585920171/Screenshot_2023-08-29_at_22.54.05.png?ex=6582034f&is=656f8e4f&hm=335545a4d476eef989ae69b85eda2f3c8844dc5969a0fc9bacc15df0e675db13&=&format=webp&quality=lossless&width=964&height=634)

> Des screenshots viendront par la suite pour chaque étape :)
